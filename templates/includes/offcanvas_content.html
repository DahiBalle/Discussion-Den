<!-- Enhanced Offcanvas Content Component -->
<div class="offcanvas-content-enhanced">
    <!-- Quick Actions Section -->
    <div class="offcanvas-section-enhanced">
        <h6 class="offcanvas-section-title">
            <i class="fas fa-bolt me-2"></i>Quick Actions
        </h6>
        <div class="offcanvas-actions">
            {% if current_user.is_authenticated %}
            <a href="{{ url_for('post.create_post') }}" class="offcanvas-action-btn primary">
                <div class="action-icon">
                    <i class="fas fa-pen"></i>
                </div>
                <div class="action-content">
                    <div class="action-title">Create Post</div>
                    <div class="action-subtitle">Share your thoughts</div>
                </div>
                <div class="action-arrow">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </a>
            <a href="{{ url_for('community.create_community') }}" class="offcanvas-action-btn">
                <div class="action-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="action-content">
                    <div class="action-title">Create Community</div>
                    <div class="action-subtitle">Start a new discussion space</div>
                </div>
                <div class="action-arrow">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </a>
            {% else %}
            <button class="offcanvas-action-btn primary" data-bs-toggle="modal" data-bs-target="#authModal" data-auth-mode="login">
                <div class="action-icon">
                    <i class="fas fa-sign-in-alt"></i>
                </div>
                <div class="action-content">
                    <div class="action-title">Login to Post</div>
                    <div class="action-subtitle">Join the conversation</div>
                </div>
                <div class="action-arrow">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </button>
            {% endif %}
        </div>
    </div>

    <!-- Navigation Section -->
    <div class="offcanvas-section-enhanced">
        <h6 class="offcanvas-section-title">
            <i class="fas fa-compass me-2"></i>Navigate
        </h6>
        <div class="offcanvas-nav-links">
            <a href="{{ url_for('feed.feed') }}" class="offcanvas-nav-link">
                <i class="fas fa-home"></i>
                <span>Home Feed</span>
            </a>
            <a href="{{ url_for('community.communities_list') }}" class="offcanvas-nav-link">
                <i class="fas fa-globe"></i>
                <span>Browse Communities</span>
            </a>
            <a href="#" class="offcanvas-nav-link offcanvas-focus-navbar-search" role="button" aria-label="Focus search">
                <i class="fas fa-search"></i>
                <span>Search</span>
            </a>
            {% if current_user.is_authenticated %}
            <a href="{{ url_for('profile.user_profile', username=current_user.username) }}" class="offcanvas-nav-link">
                <i class="fas fa-user"></i>
                <span>My Profile</span>
            </a>
            {% endif %}
        </div>
    </div>

    <!-- Trending Posts Section -->
    <div class="offcanvas-section-enhanced">
        <h6 class="offcanvas-section-title">
            <i class="fas fa-fire me-2"></i>Trending Posts
        </h6>
        <div class="trending-content">
            {% if trending_posts and trending_posts|length > 0 %}
                {% for post in trending_posts %}
                <div class="trending-item">
                    <a href="{{ url_for('post.post_detail', post_id=post.id) }}" class="trending-link">
                        <div class="trending-rank">{{ loop.index }}</div>
                        <div class="trending-info">
                            <div class="trending-title">{{ post.title[:45] }}{% if post.title|length > 45 %}...{% endif %}</div>
                            <div class="trending-meta">
                                <span class="trending-votes">
                                    <i class="fas fa-arrow-up"></i>
                                    {{ post.upvotes }}
                                </span>
                                {% if post.community %}
                                <span class="trending-community">r/{{ post.community.name }}</span>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </div>
                {% endfor %}
            {% else %}
            <div class="empty-trending">
                <div class="empty-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="empty-text">
                    <div class="empty-title">No trending posts yet</div>
                    <div class="empty-subtitle">Be the first to create viral content!</div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Recent Communities Section -->
    <div class="offcanvas-section-enhanced">
        <h6 class="offcanvas-section-title">
            <i class="fas fa-sparkles me-2"></i>New Communities
        </h6>
        <div class="communities-content">
            {% if recent_communities and recent_communities|length > 0 %}
                {% for community in recent_communities %}
                <div class="community-item">
                    <a href="{{ url_for('community.community_page', community_name=community.name) }}" class="community-link">
                        <div class="community-avatar">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="community-info">
                            <div class="community-name">r/{{ community.name }}</div>
                            <div class="community-meta">Created {{ community.created_at|timeago }}</div>
                        </div>
                        <div class="community-join">
                            <i class="fas fa-plus"></i>
                        </div>
                    </a>
                </div>
                {% endfor %}
            {% else %}
            <div class="empty-communities">
                <div class="empty-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="empty-text">
                    <div class="empty-title">No communities yet</div>
                    <div class="empty-subtitle">Create the first one!</div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
/* Enhanced Offcanvas Styles */
.offcanvas-content-enhanced {
    padding: var(--space-4) 0;
}

.offcanvas-section-enhanced {
    margin-bottom: var(--space-8);
}

.offcanvas-section-title {
    display: flex;
    align-items: center;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--space-4);
    padding: 0 var(--space-6);
}

/* Quick Actions */
.offcanvas-actions {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    padding: 0 var(--space-6);
}

.offcanvas-action-btn {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-4);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    color: var(--text-secondary);
    text-decoration: none;
    transition: var(--transition-base);
    position: relative;
    overflow: hidden;
}

.offcanvas-action-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: var(--gradient-accent);
    opacity: 0;
    transition: var(--transition-base);
}

.offcanvas-action-btn:hover {
    transform: var(--hover-lift);
    border-color: var(--border-accent);
    color: var(--text-primary);
}

.offcanvas-action-btn:hover::before {
    left: 0;
    opacity: 0.1;
}

.offcanvas-action-btn.primary {
    background: var(--gradient-accent);
    color: white;
    border-color: transparent;
    box-shadow: var(--shadow-glow);
}

.offcanvas-action-btn.primary:hover {
    color: white;
    box-shadow: var(--shadow-glow), var(--shadow-md);
}

.action-icon {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-lg);
    flex-shrink: 0;
}

.offcanvas-action-btn.primary .action-icon {
    background: rgba(255, 255, 255, 0.2);
}

.action-content {
    flex: 1;
}

.action-title {
    font-weight: var(--font-semibold);
    font-size: var(--text-base);
    margin-bottom: var(--space-1);
}

.action-subtitle {
    font-size: var(--text-xs);
    opacity: 0.8;
}

.action-arrow {
    font-size: var(--text-sm);
    opacity: 0.6;
    transition: var(--transition-base);
}

.offcanvas-action-btn:hover .action-arrow {
    opacity: 1;
    transform: translateX(2px);
}

/* Navigation Links */
.offcanvas-nav-links {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    padding: 0 var(--space-6);
}

.offcanvas-nav-link {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    color: var(--text-secondary);
    text-decoration: none;
    border-radius: var(--border-radius);
    transition: var(--transition-base);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
}

.offcanvas-nav-link:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
    transform: translateX(4px);
}

.offcanvas-nav-link i {
    width: 20px;
    text-align: center;
    font-size: var(--text-sm);
}

/* Trending Posts */
.trending-content {
    padding: 0 var(--space-6);
}

.trending-item {
    margin-bottom: var(--space-3);
}

.trending-link {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    color: var(--text-secondary);
    text-decoration: none;
    transition: var(--transition-base);
    border: 1px solid transparent;
}

.trending-link:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
    border-color: var(--border-accent);
    transform: var(--hover-lift);
}

.trending-rank {
    width: 24px;
    height: 24px;
    background: var(--gradient-accent);
    border-radius: var(--border-radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    color: white;
    flex-shrink: 0;
}

.trending-info {
    flex: 1;
    min-width: 0;
}

.trending-title {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    line-height: 1.3;
    margin-bottom: var(--space-1);
}

.trending-meta {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-xs);
    opacity: 0.8;
}

.trending-votes {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    color: var(--accent-success);
}

.trending-community {
    color: var(--accent-primary);
}

/* Communities */
.communities-content {
    padding: 0 var(--space-6);
}

.community-item {
    margin-bottom: var(--space-2);
}

.community-link {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    color: var(--text-secondary);
    text-decoration: none;
    transition: var(--transition-base);
    border: 1px solid transparent;
}

.community-link:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
    border-color: var(--border-accent);
    transform: var(--hover-lift);
}

.community-avatar {
    width: 32px;
    height: 32px;
    background: var(--gradient-accent);
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-sm);
    color: white;
    flex-shrink: 0;
}

.community-info {
    flex: 1;
    min-width: 0;
}

.community-name {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    margin-bottom: var(--space-1);
}

.community-meta {
    font-size: var(--text-xs);
    opacity: 0.8;
}

.community-join {
    width: 24px;
    height: 24px;
    background: var(--bg-hover);
    border-radius: var(--border-radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-xs);
    opacity: 0.6;
    transition: var(--transition-base);
}

.community-link:hover .community-join {
    background: var(--accent-primary);
    color: white;
    opacity: 1;
}

/* Empty States */
.empty-trending,
.empty-communities {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-8) var(--space-4);
    text-align: center;
}

.empty-icon {
    font-size: var(--text-3xl);
    color: var(--text-muted);
    margin-bottom: var(--space-4);
    opacity: 0.6;
}

.empty-title {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--text-secondary);
    margin-bottom: var(--space-1);
}

.empty-subtitle {
    font-size: var(--text-xs);
    color: var(--text-muted);
}

/* User Stats */
.user-stats {
    display: flex;
    justify-content: space-around;
    padding: var(--space-4) var(--space-6);
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-lg);
    margin: 0 var(--space-6);
    border: 1px solid var(--border-color);
}

.stat-item {
    text-align: center;
}

.stat-value {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--accent-primary);
    margin-bottom: var(--space-1);
}

.stat-label {
    font-size: var(--text-xs);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
</style>